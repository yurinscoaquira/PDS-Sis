import{j as d,r as f,R as D}from"./tree-api-CxHGZbzg.js";import{O as C,t as I,l as N,T as E,P as w}from"../pipeline-console-view-bundle.js";import"./symbols-ksAQ_sfs.js";import"./stages-o83PhJOc.js";var x={amp:"&",gt:">",lt:"<",nbsp:"Â ",quot:'"'},V=/^#[xX]([A-Fa-f0-9]+)$/,B=/^#([0-9]+)$/,L=/^([A-Za-z0-9]+)$/,P=function(){function i(t){this.named=t}return i.prototype.parse=function(t){if(t){var s=t.match(V);if(s)return String.fromCharCode(parseInt(s[1],16));if(s=t.match(B),s)return String.fromCharCode(parseInt(s[1],10));if(s=t.match(L),s)return this.named[s[1]]||"&"+s[1]+";"}},i}(),G=/[\t\n\f ]/,F=/[A-Za-z]/,O=/\r\n?/g;function l(i){return G.test(i)}function k(i){return F.test(i)}function $(i){return i.replace(O,`
`)}var z=function(){function i(t,s,o){o===void 0&&(o="precompile"),this.delegate=t,this.entityParser=s,this.mode=o,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var e=this.peek();if(e==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&e===`
`){var n=this.tagNameBuffer.toLowerCase();(n==="pre"||n==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var e=this.peek(),n=this.tagNameBuffer;e==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):e==="&"&&n!=="script"&&n!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();e==="!"?this.transitionTo("markupDeclarationOpen"):e==="/"?this.transitionTo("endTagOpen"):(e==="@"||e===":"||k(e))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(e))},markupDeclarationOpen:function(){var e=this.consume();if(e==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var n=e.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();n==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var e=this.consume();l(e)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var e=this.consume();l(e)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(e.toLowerCase()))},doctypeName:function(){var e=this.consume();l(e)?this.transitionTo("afterDoctypeName"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(e.toLowerCase())},afterDoctypeName:function(){var e=this.consume();if(!l(e))if(e===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var n=e.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),a=n.toUpperCase()==="PUBLIC",r=n.toUpperCase()==="SYSTEM";(a||r)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),a?this.transitionTo("afterDoctypePublicKeyword"):r&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var e=this.peek();l(e)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):e==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):e==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):e===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var e=this.consume();e==='"'?this.transitionTo("afterDoctypePublicIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(e)},doctypePublicIdentifierSingleQuoted:function(){var e=this.consume();e==="'"?this.transitionTo("afterDoctypePublicIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(e)},afterDoctypePublicIdentifier:function(){var e=this.consume();l(e)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):e==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):e==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var e=this.consume();l(e)||(e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):e==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):e==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var e=this.consume();e==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(e)},doctypeSystemIdentifierSingleQuoted:function(){var e=this.consume();e==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(e)},afterDoctypeSystemIdentifier:function(){var e=this.consume();l(e)||e===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var e=this.consume();e==="-"&&this.peek()==="-"?this.transitionTo("commentStartDash"):e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(e),this.transitionTo("comment"))},commentStartDash:function(){var e=this.consume();e==="-"?this.transitionTo("commentEnd"):e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var e=this.consume();e==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();e==="-"&&this.peek()==="-"?this.delegate.appendToCommentData(e):e==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+e),this.transitionTo("comment"))},commentEnd:function(){var e=this.consume();e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+e),this.transitionTo("comment"))},tagName:function(){var e=this.consume();l(e)?this.transitionTo("beforeAttributeName"):e==="/"?this.transitionTo("selfClosingStartTag"):e===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(e)},endTagName:function(){var e=this.consume();l(e)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):e==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):e===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();if(l(e)){this.consume();return}else e==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):e===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):e==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var e=this.peek();l(e)?(this.transitionTo("afterAttributeName"),this.consume()):e==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):e==='"'||e==="'"||e==="<"?(this.delegate.reportSyntaxError(e+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(e)):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();if(l(e)){this.consume();return}else e==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();l(e)?this.consume():e==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):e==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();e==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):e==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();e==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):e==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();l(e)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):e==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):e===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();l(e)?(this.consume(),this.transitionTo("beforeAttributeName")):e==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):e===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var e=this.peek();e===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var e=this.consume();(e==="@"||e===":"||k(e))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(e))}},this.reset()}return i.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},i.prototype.transitionTo=function(t){this.state=t},i.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},i.prototype.tokenizePart=function(t){for(this.input+=$(t);this.index<this.input.length;){var s=this.states[this.state];if(s!==void 0)s.call(this);else throw new Error("unhandled state "+this.state)}},i.prototype.tokenizeEOF=function(){this.flushData()},i.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},i.prototype.peek=function(){return this.input.charAt(this.index)},i.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},i.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var s=this.input.slice(this.index,t),o=this.entityParser.parse(s);if(o){for(var e=s.length;e;)this.consume(),e--;return this.consume(),o}}},i.prototype.markTagStart=function(){this.delegate.tagOpen()},i.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},i.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},i}(),R=function(){function i(t,s){s===void 0&&(s={}),this.options=s,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new z(this,t,s.mode),this._currentAttribute=void 0}return i.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},i.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},i.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},i.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},i.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var s=0;s<arguments.length;s++)if(t.type===arguments[s])return t;throw new Error("token type was unexpectedly "+t.type)},i.prototype.push=function(t){this.token=t,this.tokens.push(t)},i.prototype.currentAttribute=function(){return this._currentAttribute},i.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},i.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},i.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},i.prototype.appendToDoctypePublicIdentifier=function(t){var s=this.current("Doctype");s.publicIdentifier===void 0?s.publicIdentifier=t:s.publicIdentifier+=t},i.prototype.appendToDoctypeSystemIdentifier=function(t){var s=this.current("Doctype");s.systemIdentifier===void 0?s.systemIdentifier=t:s.systemIdentifier+=t},i.prototype.endDoctype=function(){this.addLocInfo()},i.prototype.beginData=function(){this.push({type:"Chars",chars:""})},i.prototype.appendToData=function(t){this.current("Chars").chars+=t},i.prototype.finishData=function(){this.addLocInfo()},i.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},i.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},i.prototype.finishComment=function(){this.addLocInfo()},i.prototype.tagOpen=function(){},i.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},i.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},i.prototype.finishTag=function(){this.addLocInfo()},i.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},i.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},i.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},i.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},i.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},i.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},i.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},i.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},i}();function U(i,t){var s=new R(new P(x),t);return s.tokenize(i)}const S="LinkifyResult",b="StartTag",v="EndTag",T="Chars",Q="Comment",j="Doctype";function H(i,t={}){const s=U(i),o=[],e=[],n=new C(t,M);for(let a=0;a<s.length;a++){const r=s[a];if(r.type===b){o.push(r);const h=r.tagName.toUpperCase();if(!(h==="A"||n.ignoreTags.indexOf(h)>=0))continue;let c=o.length;q(h,s,++a,o),a+=o.length-c-1}else if(r.type!==T)o.push(r);else{const h=_(r.chars,n);o.push.apply(o,h)}}for(let a=0;a<o.length;a++){const r=o[a];switch(r.type){case S:e.push(r.rendered);break;case b:{let h="<"+r.tagName;r.attributes.length>0&&(h+=" "+Y(r.attributes).join(" ")),r.selfClosing&&(h+=" /"),h+=">",e.push(h);break}case v:e.push(`</${r.tagName}>`);break;case T:e.push(y(r.chars));break;case Q:e.push(`<!--${y(r.chars)}-->`);break;case j:{let h=`<!DOCTYPE ${r.name}`;r.publicIdentifier&&(h+=` PUBLIC "${r.publicIdentifier}"`),r.systemIdentifier&&(h+=` "${r.systemIdentifier}"`),h+=">",e.push(h);break}}}return e.join("")}function _(i,t){const s=I(i),o=[];for(let e=0;e<s.length;e++){const n=s[e];n.t==="nl"&&t.get("nl2br")?o.push({type:b,tagName:"br",attributes:[],selfClosing:!0}):!n.isLink||!t.check(n)?o.push({type:T,chars:n.toString()}):o.push({type:S,rendered:t.render(n)})}return o}function q(i,t,s,o){let e=1;for(;s<t.length&&e>0;){let n=t[s];n.type===b&&n.tagName.toUpperCase()===i?e++:n.type===v&&n.tagName.toUpperCase()===i&&e--,o.push(n),s++}return o}function M({tagName:i,attributes:t,content:s}){return`<${i} ${W(t)}>${y(s)}</${i}>`}function y(i){return i.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function A(i){return i.replace(/"/g,"&quot;")}function W(i){const t=[];for(const s in i){const o=i[s]+"";t.push(`${s}="${A(o)}"`)}return t.join(" ")}function Y(i){const t=[];for(let s=0;s<i.length;s++){const o=i[s][0],e=i[s][1]+"";t.push(`${o}="${A(e)}"`)}return t}function K(i){const t=/^\u001b\[([;0-9]*)m$/,s={isSelectGraphicRendition:!1,escapeCode:i},o=t.exec(i);if(o){s.isSelectGraphicRendition=!0,s.setFG=!1,s.setBG=!1,s.resetFG=!1,s.resetBG=!1;const e=(o[1]||"").split(";").map(n=>parseInt(n||"0"));for(const n of e)n>=30&&n<=37?s.setFG=n-30:n>=40&&n<=47?s.setBG=n-40:n>=90&&n<=97?s.setFG=n-90+8:n>=100&&n<=107?s.setBG=n-100+8:n===1?s.setBold=!0:n===2?s.setFaint=!0:n===22?(s.setBold=!1,s.setFaint=!1):n===3?s.setItalic=!0:n===23?s.setItalic=!1:n===4?s.setUnderline=!0:n===24?s.setUnderline=!1:n===9?s.setStrikeThrough=!0:n===29?s.setStrikeThrough=!1:((n===39||n===0)&&(s.resetFG=!0,s.setFG=!1),(n===49||n===0)&&(s.resetBG=!0,s.setBG=!1),n===0&&(s.setBold=!1,s.setFaint=!1,s.setItalic=!1,s.setUnderline=!1,s.setStrikeThrough=!1))}return s}function X(i){if(typeof i!="string")return[];const t=i.length;if(t===0)return[];let s=0,o=0,e=0,n=0,a=0;const r=[];for(;s<t&&(o=i.indexOf("\x1B",s),o!==-1);){if(n=i.indexOf("<!--",s),a=i.indexOf("-->",n),a!==-1&&(a+=3),o>n&&o<a){s=a;continue}o>s&&(r.push(i.substring(s,o)),s=o),o+=2;let h=i.charCodeAt(o);for(;o<t&&(h<64||h>126);)o++,h=i.charCodeAt(o);const u=K(i.substring(s,o+1));r.push(u),s=o+1,e=s}return e<t&&r.push(i.substr(e)),r}function Z(i,t){const s=[];let o={setFG:!1,setBG:!1,setBold:!1,setFaint:!1,setItalic:!1,setUnderline:!1,setStrikeThrough:!1};for(let e=0;e<i.length;e++){const n=i[e];if(typeof n=="string")if(!o.setFG&&!o.setBG&&!o.setBold&&!o.setFaint&&!o.setItalic&&!o.setUnderline&&!o.setStrikeThrough)s.push(d.jsx("div",{dangerouslySetInnerHTML:{__html:n}},`${t}-${e}`));else{const a=[];typeof o.setFG=="number"&&a.push(`ansi-fg-${o.setFG}`),typeof o.setBG=="number"&&a.push(`ansi-bg-${o.setBG}`),o.setBold&&a.push("ansi-bold"),o.setFaint&&a.push("ansi-faint"),o.setItalic&&a.push("ansi-italic"),o.setUnderline&&a.push("ansi-underline"),o.setStrikeThrough&&a.push("ansi-strikethrough"),s.push(d.jsx("span",{className:a.join(" "),children:n}))}else if(n.isSelectGraphicRendition){const a={...o};n.resetFG&&(a.setFG=!1),n.resetBG&&(a.setBG=!1),typeof n.setFG=="number"&&(a.setFG=n.setFG),typeof n.setBG=="number"&&(a.setBG=n.setBG),n.setBold!==void 0&&(a.setBold=n.setBold),n.setFaint!==void 0&&(a.setFaint=n.setFaint),n.setItalic!==void 0&&(a.setItalic=n.setItalic),n.setUnderline!==void 0&&(a.setUnderline=n.setUnderline),n.setStrikeThrough!==void 0&&(a.setStrikeThrough=n.setStrikeThrough),o=a}}return s}const J=f.memo(function(t){const s=`?start-byte=${t.startByte}&selected-node=${t.stepId}`,o=`log-${t.stepId}-${t.lineNumber}`;return d.jsx("pre",{style:{background:"none",border:"none"},className:"console-output-line",children:d.jsxs("div",{className:"console-output-line",children:[d.jsx("a",{className:"console-line-number",id:o,href:`${s}#${o}`,onClick:()=>{history.replaceState({},"",s)},style:{width:Math.max(9*String(t.lineNumber).length,30)+"px"},children:t.lineNumber}),d.jsx("div",{className:"console-text",children:Z(X(H(t.content,N)),o)})]})})});function g(){return!window.location.hash.startsWith("#log-")}function ne({step:i,logBuffer:t,onMoreConsoleClick:s,fetchExceptionText:o}){const e=f.useRef(null),[n,a]=f.useState(!1);f.useEffect(()=>()=>{e.current&&clearInterval(e.current)},[]),f.useEffect(()=>{i.state===D.failure&&o(i.id)},[i.id,i.state,o]),f.useEffect(()=>{n&&t.lines.length>0&&g()&&t.lines&&requestAnimationFrame(()=>{if(!g())return;const u=document.documentElement.scrollHeight;window.scrollTo({top:u})})},[n,t.lines]),f.useEffect(()=>{if(!g())return;const u=()=>{if(!g()){window.removeEventListener("scroll",u),a(!1);return}const c=window.scrollY+window.innerHeight,m=document.body.scrollHeight-c<300;a(m)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),f.useEffect(()=>{const u=i.state===D.running||t.endByte<0;n&&u?e.current||(e.current=window.setInterval(()=>{s(i.id,E)},w)):e.current&&(clearInterval(e.current),e.current=null)},[n,i,t,s]);const[r,h]=f.useState(window.location.hash.startsWith("#log-"));return f.useEffect(()=>{if(!r)return;let u=window.location.hash;if(!u.startsWith("#log-"))return;let[c,p]=u.slice(5).split("-");if(p&&c!==i.id){h(!1);return}p||(p=c,c=i.id,u=`#log-${c}-${p}`,location.hash=u);const m=document.getElementById(u.slice(1));m&&(m.scrollIntoView({behavior:"smooth",block:"center"}),location.hash="",location.hash=u,h(!1))},[r,i.id,t.lines]),d.jsx("div",{role:"log",children:t.lines.map((u,c)=>d.jsx(J,{lineNumber:String(c),content:u,stepId:i.id,startByte:t.startByte},c))})}export{ne as default};
//# sourceMappingURL=ConsoleLogStream-Cf8MQNMN.js.map
