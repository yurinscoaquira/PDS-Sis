(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.app-page-body--one-column{max-width:95vw}.PWGx-pipeline-connector{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background))}.PWGx-pipeline-node{position:relative;display:flex;align-items:center;justify-content:center;width:1.75rem;height:1.75rem;z-index:0}.PWGx-pipeline-node:before{content:"";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;background:var(--card-background);border-radius:50%;z-index:-1}.PWGx-pipeline-node--selected:after{box-shadow:0 0 0 .125rem currentColor,0 0 0 .5rem var(--card-background)!important}.PWGx-pipeline-node--running.PWGx-pipeline-node--selected:after{top:0;right:0;bottom:0;left:0;box-shadow:0 0 0 .125rem color-mix(in srgb,currentColor,transparent),0 0 0 .5rem var(--card-background)!important}.PWGx-pipeline-node:has(a):after{content:"";position:absolute;top:1px;right:1px;bottom:1px;left:1px;border-radius:50%;z-index:-1;transition:var(--standard-transition);box-shadow:0 0 0 .5rem transparent}.PWGx-pipeline-node:has(a):focus-visible{outline:none}.PWGx-pipeline-node:has(a):hover:after{background:oklch(from var(--color) l c h/.1)}.PWGx-pipeline-node:has(a):active:after,.PWGx-pipeline-node:has(a):focus:after{background:oklch(from var(--color) l c h/.15);box-shadow:0 0 0 .25rem oklch(from var(--color) l c h/.15)}.PWGx-pipeline-node:has(a):focus-visible:after{box-shadow:0 0 0 .2rem var(--text-color)!important}.PWGx-pipeline-node a{position:absolute;top:0;right:0;bottom:0;left:0;background:transparent}.PWGx-pipeline-node svg{width:1.75rem;height:1.75rem}.PWGx-pipeline-node:has(.PWGx-pipeline-node-terminal):before{top:4px;right:4px;bottom:4px;left:4px}.PWGx-pipeline-node-counter{width:1.25rem;border-radius:1rem;line-height:1rem;text-align:center;font-size:var(--font-size-xs);font-weight:var(--font-bold-weight);cursor:default;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));color:var(--text-color-secondary)}.PWGx-pipeline-node-counter:before{display:none!important}.PWGx-pipeline-node-terminal{width:10px;height:10px;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));border-radius:10px}.PWGx-pipeline-node-terminal:before{display:none!important}.PWGx-pipeline-connector-skipped{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background));stroke-opacity:.25}.PWGx-pipeline-small-label{font-size:.75rem;transition:translate var(--standard-transition)}.PWGx-pipeline-small-label--selected{translate:0 2px}.PWGx-pipeline-big-label{font-weight:var(--font-bold-weight);font-size:.8125rem;transition:translate var(--standard-transition);-webkit-line-clamp:1!important}.PWGx-pipeline-big-label--selected{translate:0 -2px}.PWGx-pipeline-big-label.pgv-graph-node--synthetic{font-style:italic}.PWGx-pipeline-big-label.pgv-graph-node--skeleton{color:var(--text-color-secondary);font-weight:400}.pgv-stages__group{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.pgv-stages__group .pgv-stages__heading{display:flex;font-size:var(--font-size-xs);color:var(--text-color-secondary);font-weight:var(--font-bold-weight);margin-bottom:.25rem;margin-top:0}.pgv-stages__group:first-of-type{margin-top:0}.PWGx-PipelineGraph-container{display:flex;flex-direction:column;align-items:center;overflow-x:auto;margin-bottom:0}.PWGx-PipelineGraph-container *{box-sizing:border-box}.PWGx-PipelineGraph-container .PWGx-PipelineGraph{margin-right:auto}.pgv-single-run{display:grid;grid-template-columns:220px 1fr;align-items:center}.pgv-single-run:last-of-type{border-bottom:none}.pgv-single-run--compact .PWGx-PipelineGraph-container{height:36px}.pgv-single-run--compact .PWGx-PipelineGraph-container>div{margin-top:-36px}.pgv-single-run .pgv-user-specified-text{display:grid;grid-template-columns:auto 1fr;align-items:start;gap:.125rem .625rem;color:var(--text-color);text-decoration:none;transition:opacity var(--standard-transition);word-break:normal;overflow-wrap:anywhere}.pgv-single-run .pgv-user-specified-text span{grid-area:2/2;color:var(--text-color-secondary);font-size:var(--font-size-xs)}.pgv-single-run .pgv-user-specified-text:hover{opacity:.75}.pgv-single-run .pgv-user-specified-text:active{opacity:.5}.pgv-single-run .pgv-user-specified-text svg{width:1.375rem;height:1.375rem}.pgv-dropdown-checkboxes{display:flex;flex-direction:column;gap:.75rem;margin:.5rem;font-size:var(--font-size-sm);color:var(--text-color);-webkit-user-select:none;user-select:none}')),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
import{u as P,t as x,j as e,S,v as b,w as E,s as D,r as h,x as f,m as u,y as I,z as _,l as j,n as k,I as C,o as R,U as B,p as F}from"./assets/tree-api-CxHGZbzg.js";import{u as L,c as v,a as w,S as N,U}from"./assets/symbols-ksAQ_sfs.js";function O({run:s,currentJobPath:t}){const{run:n}=P({currentRunPath:t+s.id+"/"});function a(){const c=h.useContext(f);if(s.changesCount!==0)return e.jsxs(e.Fragment,{children:[" - ",c.format(u.changesSummary,{0:s.changesCount})]})}const{showNames:r,showDurations:o}=x();function i(){const c={...I};return!r&&!o?c.nodeSpacingH=45:c.nodeSpacingH=90,c}function d(){return!r&&!o?"pgv-single-run--compact":""}return e.jsxs("div",{className:`pgv-single-run ${d()}`,children:[e.jsx("div",{children:e.jsxs("a",{href:t+s.id,className:"pgv-user-specified-text",children:[e.jsx(S,{status:s.result}),s.displayName,e.jsxs("span",{children:[b(s.timestamp)," - ",e.jsx(E,{ms:s.duration}),e.jsx(a,{})]})]})}),e.jsx(D,{stages:n.stages,layout:i(),collapsed:!0})]})}function T(s,t,n,a=1e4){const r=s+"multi-pipeline-graph/runs";async function o(){try{const d=await(await fetch(r)).json();t(d.data)}catch(i){n(i)}finally{setTimeout(()=>o(),a)}}o()}const V=()=>{const[s,t]=h.useState([]),[n,a]=h.useState(!1),o=document.getElementById("multiple-pipeline-root").dataset.currentJobPath;h.useEffect(()=>{n||(a(!0),T(o,t,l=>{console.log(l)}))},[o,s,n]);const i=_(),d=s.reduce((l,p)=>{const m=new Date(p.timestamp).toLocaleDateString(i,{year:"numeric",month:"long",day:"numeric"});return l[m]||(l[m]=[]),l[m].push(p),l},{}),c=h.useContext(f);return e.jsx(e.Fragment,{children:Object.keys(d).length===0?e.jsx("div",{className:"pgv-stages__group",children:e.jsx("div",{className:"pgv-stages__heading",children:c.format(u.noBuilds)})}):Object.entries(d).map(([l,p])=>e.jsxs("div",{className:"pgv-stages__group",children:[e.jsx("p",{className:"pgv-stages__heading",children:l}),p.map(m=>e.jsx(O,{run:m,currentJobPath:o},m.id))]},l))})};function g({label:s,value:t,setValue:n}){const a=h.useId();return e.jsxs("div",{className:"jenkins-checkbox",children:[e.jsx("input",{type:"checkbox",id:a,name:a,checked:t,onChange:r=>n(r.target.checked)}),e.jsx("label",{htmlFor:a,children:s})]})}function G({buttonPortal:s}){const{showNames:t,setShowNames:n,showDurations:a,setShowDurations:r}=x(),{canConfigure:o}=L(),i=j();return e.jsx(v,{container:s,children:e.jsx(w,{className:"jenkins-card__reveal",items:[e.jsxs("div",{className:"pgv-dropdown-checkboxes",children:[e.jsx(g,{label:i.format(u.showNames),value:t,setValue:n}),e.jsx(g,{label:i.format(u.showDuration),value:a,setValue:r})]},"settings-options"),o?"separator":e.jsx(e.Fragment,{}),o?{text:"Configure",icon:N,href:"../configure"}:e.jsx(e.Fragment,{})]})})}function M({buttonPortal:s}){const t=j(),{showNames:n,setShowNames:a,showDurations:r,setShowDurations:o}=x();return e.jsx(e.Fragment,{children:e.jsx(v,{container:s,children:e.jsx(w,{tooltip:t.format(u.settings),icon:N,className:"jenkins-card__reveal",items:[e.jsxs("div",{className:"pgv-dropdown-checkboxes",children:[e.jsx(g,{label:t.format(u.showNames),value:n,setValue:a}),e.jsx(g,{label:t.format(u.showDuration),value:r,setValue:o})]},"settings-options")]})})})}const z=()=>{const s=document.getElementById("multiple-pipeline-root").dataset.userLocale,t=document.getElementById("pgv-settings"),n=document.getElementById("multiple-pipeline-overflow-root");if(!t&&!n)throw new Error("Failed to find the 'settings/overflow' element");if(t&&n)throw new Error("Only one of the 'settings/overflow' elements should be defined");return e.jsx("div",{children:e.jsx(k,{locale:s,children:e.jsx(C,{bundles:[R.messages],children:e.jsxs(B,{children:[t&&e.jsx(M,{buttonPortal:t}),n&&e.jsx(U,{children:e.jsx(G,{buttonPortal:n})}),e.jsx(V,{})]})})})})},y=document.getElementById("multiple-pipeline-root");if(!y)throw new Error("Failed to find the 'multiple-pipeline-root' element");const H=F.createRoot(y);H.render(e.jsx(z,{}));
//# sourceMappingURL=multi-pipeline-graph-view-bundle.js.map
